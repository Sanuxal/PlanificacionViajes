<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planificación de Viajes</title>
</head>
<body>
    <h1>Planificación de Viajes de Autocares</h1>
    <form id="planificacionForm">
        <h2>Datos de Conductores</h2>
        <label for="numConductores">Número de Conductores:</label>
        <input type="number" id="numConductores" name="numConductores" required><br><br>

        <h2>Datos de Autocares</h2>
        <label for="numAutocares">Número de Autocares:</label>
        <input type="number" id="numAutocares" name="numAutocares" required><br><br>

        <h2>Datos de Viajes</h2>
        <label for="numViajes">Número de Viajes:</label>
        <input type="number" id="numViajes" name="numViajes" required><br><br>
        <div id="viajesContainer"></div>
        <button type="button" onclick="agregarViajes()">Agregar Viajes</button><br><br>

        <h2>Hora de Inicio</h2>
        <label for="horaInicio">Hora de Inicio (24h, ej. 8 para 8:00 AM):</label>
        <input type="number" id="horaInicio" name="horaInicio" required><br><br>

        <button type="button" onclick="planificarViajes()">Planificar</button>
    </form>

    <h2>Resultados</h2>
    <pre id="resultados"></pre>

    <script>
        function agregarViajes() {
            const numViajes = document.getElementById('numViajes').value;
            const viajesContainer = document.getElementById('viajesContainer');
            viajesContainer.innerHTML = '';

            for (let i = 0; i < numViajes; i++) {
                const labelInicio = document.createElement('label');
                labelInicio.textContent = `Inicio del Viaje ${i + 1}:`;
                const inputInicio = document.createElement('input');
                inputInicio.type = 'text';
                inputInicio.id = `inicioViaje${i}`;
                inputInicio.name = `inicioViaje${i}`;
                inputInicio.required = true;

                const labelDestino = document.createElement('label');
                labelDestino.textContent = `Destino del Viaje ${i + 1}:`;
                const inputDestino = document.createElement('input');
                inputDestino.type = 'text';
                inputDestino.id = `destinoViaje${i}`;
                inputDestino.name = `destinoViaje${i}`;
                inputDestino.required = true;

                const labelDuracion = document.createElement('label');
                labelDuracion.textContent = `Duración del Viaje ${i + 1} (horas):`;
                const inputDuracion = document.createElement('input');
                inputDuracion.type = 'number';
                inputDuracion.id = `duracionViaje${i}`;
                inputDuracion.name = `duracionViaje${i}`;
                inputDuracion.required = true;

                viajesContainer.appendChild(labelInicio);
                viajesContainer.appendChild(inputInicio);
                viajesContainer.appendChild(document.createElement('br'));
                viajesContainer.appendChild(labelDestino);
                viajesContainer.appendChild(inputDestino);
                viajesContainer.appendChild(document.createElement('br'));
                viajesContainer.appendChild(labelDuracion);
                viajesContainer.appendChild(inputDuracion);
                viajesContainer.appendChild(document.createElement('br'));
            }
        }

        function planificarViajes() {
            const numConductores = document.getElementById('numConductores').value;
            const numAutocares = document.getElementById('numAutocares').value;
            const numViajes = document.getElementById('numViajes').value;
            const horaInicio = parseInt(document.getElementById('horaInicio').value);

            // Crear listas de conductores y autocares
            const conductores = Array.from({ length: numConductores }, (_, i) => ({ id: i, horasConducidas: 0, descansos: 0, viajes: [] }));
            const autocares = Array.from({ length: numAutocares }, (_, i) => ({ id: i, viajes: [] }));
            const viajes = Array.from({ length: numViajes }, (_, i) => ({
                id: i,
                inicio: document.getElementById(`inicioViaje${i}`).value,
                destino: document.getElementById(`destinoViaje${i}`).value,
                duracion: parseInt(document.getElementById(`duracionViaje${i}`).value)
            }));

            // Algoritmo de planificación
            let horaActual = horaInicio;
            for (const viaje of viajes) {
                const conductor = conductores.shift();
                const autocar = autocares.shift();

                if (conductor.horasConducidas + viaje.duracion <= 9) {
                    conductor.horasConducidas += viaje.duracion;
                    autocar.viajes.push({ ...viaje, horaInicio: horaActual });
                    conductor.viajes.push({ ...viaje, horaInicio: horaActual });
                } else {
                    conductor.descansos += 1;
                    conductor.horasConducidas = viaje.duracion;
                    autocar.viajes.push({ ...viaje, horaInicio: horaActual });
                    conductor.viajes.push({ ...viaje, horaInicio: horaActual });
                }

                horaActual += viaje.duracion;
                conductores.push(conductor);
                autocares.push(autocar);
            }

            // Mostrar resultados
            let resultados = '';
            for (const autocar of autocares) {
                resultados += `Autocar ${autocar.id}:\n`;
                for (const viaje of autocar.viajes) {
                    resultados += `  Viaje ${viaje.id} - Inicio: ${viaje.inicio} - Destino: ${viaje.destino} - Duración: ${viaje.duracion} horas - Inicio: ${viaje.horaInicio}:00\n`;
                }
            }
            for (const conductor of conductores) {
                resultados += `Conductor ${conductor.id}:\n`;
                for (const viaje of conductor.viajes) {
                    resultados += `  Viaje ${viaje.id} - Inicio: ${viaje.inicio} - Destino: ${viaje.destino} - Duración: ${viaje.duracion} horas - Inicio: ${viaje.horaInicio}:00\n`;
                }
                resultados += `  Horas conducidas: ${conductor.horasConducidas}, Descansos: ${conductor.descansos}\n`;
            }

            document.getElementById('resultados').textContent = resultados;
        }
    </script>
</body>
</html>
